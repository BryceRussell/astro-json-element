---
import Element from "./Element.astro";

export interface Props {
    tag?: string;
    text?: string;
    innerHTML?: string;
    [attrs: string]: any;
}

const {
    tag: Tag="div",
    text,
    innerHTML,
    ...attrs
} = Astro.props as Props

var children = [];

function omit(obj) {
    const _obj = obj;
    Object.keys(_obj).forEach((key) => {
        if (key == "tag" || key == "text" || key == "innerHTML" || key == "class") delete _obj[key]
        if (key.startsWith('_')) {
            children.push(_obj[key])
            delete _obj[key]
        }
    })
  return _obj;
}
---

<Tag class:list={attrs.class} {...omit(attrs)} set:html={innerHTML}>
    {text && text}
    { children && children.map((e) => {
        return <Element {...e} />
    })}
</Tag>